# SIMPLE FRONTEND DOCKERFILE THAT WORKS
FROM node:20

WORKDIR /app

# Copy package.json
COPY apps/frontend/package.json .

# Install with legacy peer deps to avoid conflicts
RUN npm install --legacy-peer-deps

# Copy frontend code
COPY apps/frontend .

# Build the app
RUN npm run build

# Expose and run
EXPOSE 3000
CMD ["npm", "run", "preview", "--", "--host", "0.0.0.0", "--port", "3000"]